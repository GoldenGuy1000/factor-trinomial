<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Factor Trinomial</title>
</head>

<style>
    input[type=number] {
        max-width: 30px;
        padding: 0;
        background-color: #252525;
        color: #f0f0f0;
        border: none;
        outline: none;
        text-align: right;
        font-size: large;
        offset-end: 0;
        -webkit-appearance: none;
        margin: 0;
        -moz-appearance: textfield;
    }
</style>


<body style="background-color: #101010">

    <meta name="viewport" content="initial-scale=1.0, user-scalable=1">

    <div style="text-align: center;">
        <noscript><p style="color: red">this is purely based on js, plz enable</p></noscript>
    </div>

    <div style="max-width: 500px; margin: auto; text-align: center; padding: 15px;
    font-family: 'Arial', serif; font-size: large;
    color: #f0f0f0; background-color: #1a1a1a">

        <div style="font-size: xxx-large; padding-bottom: 5px"><b>Factor Trinomial</b></div>

        <div style="text-align: left;">
            <div>
                Input a trinomial: ax² + bx + c
            </div>
            <div>
                & get it factored: a(x-r₁)(x-r₂)
            </div>

            <div style="padding-top: 20px">
                <label for="a"></label><input type="number" id="a" name="a" placeholder="a">
                x² +
                <label for="b"></label><input type="number" id="b" name="b" placeholder="b">
                x +
                <label for="c"></label><input type="number" id="c" name="c" placeholder="c" style="text-align: left">
            </div>

            <div id="output" style="padding-top: 40px">

            </div>
        </div>

    </div>

    <script>

        let a = document.getElementById("a")
        let b = document.getElementById("b")
        let c = document.getElementById("c")
        let output = document.getElementById("output")

        // reset

        function reset() {
            a.value=b.value=c.value=output.innerHTML = ""
            a.focus()
        }

        reset()

        document.onkeydown = function(key) { if (key.key === "Escape") {reset()} }

        // input

        a.onkeydown = function(key) {
            if (key.key === "Enter" || key.key === " ") {
                b.focus()
            }
        }

        b.onkeydown = function(key) {
            if (key.key === "Enter" || key.key === " ") {
                c.focus()
            }
        }

        c.onkeydown = function(key) {
            if (key.key === "Enter") {
                factorTrinomial()
            }
        }

        a.onkeyup = function() {a.value = cleanNonNumbers(a.value)}
        b.onkeyup = function() {b.value = cleanNonNumbers(b.value)}
        c.onkeyup = function() {c.value = cleanNonNumbers(c.value)}

        // formatting

        function cleanNonNumbers(text) {
            return text.replace(/[^0-9\-]/g,'');
        }

        function sign(number) {
            if (number > 0) {
                return "+" + number
            } else if (number === 0) {
                return ""
            } else {
                return number
            }
        }

        function iDontLikeOnes(number) {
            if (number === 1) {
                return ""
            } else {
                return number
            }
        }

        // output

        function factorTrinomial() {
            let av = parseFloat(a.value); if (isNaN(av)) {av = 1}
            let bv = parseFloat(b.value); if (isNaN(bv)) {bv = 0}
            let cv = parseFloat(c.value); if (isNaN(cv)) {cv = 0}
            let r1 = -(-bv+Math.sqrt(bv*bv-4*av*cv))/(2*av)
            let r2 = -(-bv-Math.sqrt(bv*bv-4*av*cv))/(2*av)

            r1 = sign(r1)
            r2 = sign(r2)

            if (isNaN(r1) || isNaN(r2)) {
                output.innerHTML = "not factorable"
            } else {
                output.innerHTML =
                    iDontLikeOnes(av) + "(x" + r1 + ")(x" + r2 + ")"
            }
        }
    </script>

</body>

</html>
